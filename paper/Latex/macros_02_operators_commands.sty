%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Latex Shortcuts and Redefinitions
%%
%%  Original by Jonathan Huggins, with thanks to Dan Roy and Ryan Adams for allowing the use many of their definitions.
%%
%%  Adapted by Trevor Campbell for personal use.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage{xifthen}
\usepackage{xspace} %used at the end of macros to automatically determine whether spaces should be eaten or not
\usepackage[mathscr]{eucal} %use euler script instead of mathcal
\usepackage{dsfont} %doublestroke fonts (for things like reals, nats, complex numbers, etc)
\usepackage[nice]{nicefrac} %nice fraction typesetting, compact symbols for 1/2, etc
% \usepackage[usenames]{color} %for using colored text
\usepackage{hyperref} %typical linking package
\usepackage{amsmath,amssymb,amsthm,bm,bbm,amsfonts,mathtools} %math
\usepackage[capitalize,sort,compress]{cleveref} %nice reference package for automatically choosing names for references
\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}
\usepackage{import, subfiles} %packages for using subfile/folder structure
\usepackage{url} %nice URL typesetting
% \usepackage{algpseudocode, algorithm} %typical alg typesetting packages
\usepackage{graphicx} %typical graphics package for figures
\usepackage{multirow} %multirow tables
\usepackage{wrapfig} %figures wrapped into the text
\usepackage{caption,subcaption} %package for sub-environments (figs, tables, etc)
\usepackage{microtype} %microtypesetting improvements for latex
\usepackage{booktabs} %professional quality tables

%%%%%%%%%%%%%
%%% Links %%%
%%%%%%%%%%%%%
% \renewcommand*{\UrlFont}{\ttfamily\scriptsize\relax}

%%%%%%%%%%%%%%%%%%%%%%%
%%% Align shortcuts %%%
%%%%%%%%%%%%%%%%%%%%%%%
%\AtBeginDocument{ %necessary to stop clash with autonum package
%\def\[#1\]{\begin{align}#1\end{align}}		% numbered
%\def \<#1\>{\begin{aligned}#1\end{aligned}}
%\def\(#1\){\begin{align*}#1\end{align*}} 	% unnumbered
%}

%%%%%%%%%%%%%%%%%%%%%%
%%% Important Sets %%%
%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\reals}{\ensuremath{\mathbb{R}}}
\newcommand{\ints}{\ensuremath{\mathbb{Z}}}
\newcommand{\rats}{\ensuremath{\mathbb{Q}}}
\newcommand{\field}{\ensuremath{\mathbb{F}}}
\newcommand{\fieldk}{\ensuremath{\mathbb{K}}}
\newcommand{\nats}{\ensuremath{\mathbb{N}}}
\newcommand{\comps}{\ensuremath{\mathbb{C}}}

%%%%%%%%%%%%%%%%%%%%%%%%
%%% Matrix Operators %%%
%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\tr}{\operatorname{tr}}
\newcommand{\kron}{\operatorname{\otimes}}
\newcommand{\trp}{^{\mathsf T}}       % matrix transpose
\newcommand{\trpa}{\mkern-2mu\raise1.25ex\hbox{$\scriptscriptstyle{\mathsf T}$}\mkern-3.5mu}
\newcommand{\hrm}{^{\mathsf H}}       % hermitian conjugate
\renewcommand{\ker}[1]{\mathcal{N}(#1)}
\newcommand{\ran}[1]{\mathcal{R}(#1)}

%%%%%%%%%%%%%%%%%%%%%%%
%%% General Purpose %%%
%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\tuple}[1][]{\left\langle #1 \right\rangle}
\newcommand{\emptystr}{\text{\o}}
\newcommand{\ind}{\mathds{1}} % indicator function
\newcommand{\sgn}{\operatorname{sgn}} % sign function
\newcommand{\theset}[1]{\lbrace #1 \rbrace}
\newcommand{\sn}[2]{\ensuremath{#1\!\times\!10^{#2}}}	% #1 x 10^{#2}

\newcommand{\stt}{\,:\,}
\newcommand{\given}{\,|\,}
\newcommand{\closure}[1]{\operatorname{cl}\left( #1 \right)}
\newcommand{\bdary}[1]{\partial\left( #1 \right)}
\newcommand{\interior}[1]{\operatorname{int}{\left( #1 \right)}}
\newcommand{\diam}[1]{\operatorname{diam}\left( #1 \right)}
\newcommand{\spann}[1]{\operatorname{span}\left( #1 \right)}
\newcommand{\rank}[1]{\operatorname{rank}\left( #1 \right)}
\newcommand{\nullity}[1]{\operatorname{nullity}\left( #1 \right)}


% New definition of square root:
% it renames \sqrt as \oldsqrt
\let\oldsqrt\sqrt
% it defines the new \sqrt in terms of the old one
\def\sqrt{\mathpalette\DHLhksqrt}
\def\DHLhksqrt#1#2{%
\setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
\advance\dimen0-0.2\ht0
\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
{\box0\lower0.4pt\box2}}

% min and max
\def\argmax{\operatornamewithlimits{arg\,max}}
\def\argmin{\operatornamewithlimits{arg\,min}}
\def\esssup{\operatornamewithlimits{ess\,sup}}
\def\essinf{\operatornamewithlimits{ess\,inf}}

% Equality operators
\mathtoolsset{centercolon}
%\newcommand{\defined}{\ensuremath{\triangleq}}
\newcommand{\defined}{:=}
\newcommand{\defines}{=:}
\newcommand{\xapprox}[1]{\underset{#1}{\approx}}
\newcommand{\medeq}{\!=\!}
\newcommand{\shorteq}{\!\!=\!\!}

% Other binary operators
\newcommand{\sm}{\!-\!}
\newcommand{\splus}{\!+\!}

% Suffix values ----------------------------------------------------------
\renewcommand{\th}{\mbox{\rm th}}
\newcommand{\rd}{\mbox{\rm rd}}
\newcommand{\nd}{\mbox{\rm nd}}
\newcommand{\st}{\mbox{\rm st}}
\newcommand{\dif}{\, {\rm d}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Optimization               %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\prox}[2]{\ensuremath{\operatorname{prox}_{#1}\left(#2\right)}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Convex Analysis %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareMathOperator{\cone}{cone}
\DeclareMathOperator{\conv}{conv}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Probability and Statistics %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% text shortcuts
\newcommand{\iid}{\textrm{i.i.d.}\@\xspace}
\newcommand{\inid}{\textrm{i.n.i.d.}\@\xspace}
\newcommand{\as}{\textrm{a.s.}\@\xspace}
\newcommand{\aev}{\textrm{a.e.}\@\xspace}

% convergence
\newcommand{\convas}{\overset{a.s.}{\to}}
\newcommand{\convp}{\overset{p}{\to}}
\newcommand{\convd}{\overset{d}{\to}}
\newcommand{\eqd}{\overset{d}{=}}
\newcommand{\eqas}{\overset{a.s.}{=}}

% unary/functions
% \newcommand{\Prb}[1]{\mathbb{P}\left(#1\right)} % probability
% \newcommand{\Exp}[1]{\mathbb{E}\left(#1\right)} % expectation
% \newcommand{\Var}[1]{\mathbb{V}\left(#1\right)} %

\newcommand{\Prb}[1]{\mathop{\bf Pr\/}\left(#1\right)}       
\newcommand{\Exp}[1]{\mathop{\bf E\/}\left( #1 \right)}
\newcommand{\Expb}[2]{\mathop{\bf E\/}_{#1}\left( #2 \right)}
\newcommand{\Var}[1]{\mathop{\bf Var\/}\left( #1 \right)}
\newcommand{\Cov}{\mathop{\bf Cov\/}}
\newcommand{\stddev}[1]{\mathop{\bf stddev\/}\left( #1 \right)}
\newcommand{\supp}[1]{\mathop{\bf supp\/}\left( #1 \right)} %support

% binary operators
\newcommand{\dist}{\sim}
\newcommand{\distiid}{\overset{\textrm{\tiny\iid}}{\dist}}
\newcommand{\distind}{\overset{\textrm{\tiny\textrm{indep}}}{\dist}}

\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern4mu{#1#2}}}
\newcommand\indep{\protect\mathpalette{\protect\independenT}{\perp}} % independent

% parametric distributions
\newcommand{\distNamed}[1]{{\sf{#1}}}
\newcommand{\distNorm}{\mathcal{N}}
\newcommand{\distT}{\mathcal{T}}
\newcommand{\distLaplace}{\distNamed{Lap}}
\newcommand{\distUnif}{\distNamed{Unif}}
\newcommand{\distGam}{\distNamed{Gam}}
\newcommand{\distGumbel}{\distNamed{Gumbel}}
\newcommand{\distGEV}{\distNamed{GEV}}
\newcommand{\distCat}{\distNamed{Categorical}}
\newcommand{\distInvGam}{\distNamed{InvGam}}
\newcommand{\distPoiss}{\distNamed{Poiss}}
\newcommand{\distExp}{\distNamed{Exp}}
\newcommand{\distBeta}{\distNamed{Beta}}
\newcommand{\distBetaPrime}{\distNamed{Beta}'}
\newcommand{\distDir}{\distNamed{Dir}}
\newcommand{\distBinom}{\distNamed{Binom}}
\newcommand{\distMulti}{\distNamed{Multi}}
\newcommand{\distBern}{\distNamed{Bern}}
\newcommand{\distGeom}{\distNamed{Geom}}
\newcommand{\distWish}{\mathpzc{W}}
\newcommand{\distInvWish}{\mathpzc{IW}}
\newcommand{\logit}{\distNamed{logit}}

% non-parametric distribution
\newcommand{\distBeP}{\mathrm{BeP}}
\newcommand{\distDP}{\mathrm{DP}}
\newcommand{\distCRP}{\mathrm{CRP}}
\newcommand{\distPYP}{\mathrm{PY}}
\newcommand{\distGP}{{\mathrm{GP}}} % Gaussian process
\newcommand{\distPP}{\mathrm{PP}}
\newcommand{\distBP}{\mathrm{BP}}
\newcommand{\distBPP}{\mathrm{BPP}}
\newcommand{\distGammaP}{\mathrm{\Gamma P}}
\newcommand{\distNGammaP}{\mathrm{N\Gamma P}}
\newcommand{\distLP}{\mathrm{LP}}
\newcommand{\distObs}{\mathrm{Obs}}
\newcommand{\distCRM}{\mathrm{CRM}}
\newcommand{\distNCRM}{\mathrm{NCRM}}
\newcommand{\distVMF}{\mathrm{vMF}}

% complexity classes
% From Prof. Ryan O'Donnell's .sty file (CMU)
\newcommand{\poly}{\mathsf{poly}}
\newcommand{\polylog}{\mathsf{polylog}}
\newcommand{\PTIME}{\mathsf{P}}
\newcommand{\LOGSPACE}{\mathsf{L}}
\newcommand{\ZPP}{\mathsf{ZPP}}
\newcommand{\RP}{\mathsf{RP}}
\newcommand{\BPP}{\mathsf{BPP}}
\newcommand{\NP}{\mathsf{NP}}
\newcommand{\TC}{\mathsf{TC}}
\newcommand{\AC}{\mathsf{AC}}
\newcommand{\SC}{\mathsf{SC}}
\newcommand{\SZK}{\mathsf{SZK}}
\newcommand{\AM}{\mathsf{AM}}
\newcommand{\IP}{\mathsf{IP}}
\newcommand{\PSPACE}{\mathsf{PSPACE}}
\newcommand{\EXP}{\mathsf{EXP}}
\newcommand{\MIP}{\mathsf{MIP}}
\newcommand{\NEXP}{\mathsf{NEXP}}
\newcommand{\BQP}{\mathsf{BQP}}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Information Theory %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\divergence}[4][]{\mathrm{D^{\ifthenelse{\isempty{#1}}{}{#1}}_{#2}}\left(#3 || #4\right)}
\newcommand{\distance}[4][]{\mathrm{D^{\ifthenelse{\isempty{#1}}{}{#1}}_{#2}}\left(#3, #4\right)}
\newcommand{\kl}[3][]{\divergence[#1]{KL}{#2}{#3}}
\newcommand{\tvd}[3][]{\distance[#1]{TV}{#2}{#3}}
\newcommand{\ent}[1]{\mathcal{H}\left(#1\right)}
\newcommand{\hell}[3][]{\distance[#1]{H}{#2}{#3}}
\newcommand{\dsymm}[3]{\triangle_{#1}\left({#2}, {#3}\right)}
\newcommand{\dhaus}[3]{\delta_{#1}\left({#2}, {#3}\right)}

%%%%%%%%%%%%%%%%%%%%%
%%% Special Funcs %%%
%%%%%%%%%%%%%%%%%%%%%
\newcommand*\pFq[2]{{}_{#1}F_{#2}}

%%%%%%%%%%%%%%%%
%%% Calculus %%%
%%%%%%%%%%%%%%%%
\newcommand{\dee}{\mathrm{d}}
\newcommand{\grad}{\nabla}

\newcommand{\der}[2]{\ensuremath{\frac{\dee #1}{\dee #2}}}
\newcommand{\dder}[2]{\ensuremath{\frac{d^2 #1}{d #2^2}}}
\newcommand{\D}[2]{\ensuremath{\frac{\partial #1}{\partial #2}}}
\newcommand{\DD}[2]{\ensuremath{\frac{\partial^2 #1}{\partial #2^2}}}
\newcommand{\Di}[2]{\ensuremath{\frac{\partial^i #1}{\partial #2^i}}}
\newcommand{\prt}[1]{\ensuremath{\frac{\partial}{\partial #1}}}
\newcommand{\hes}[2]{\ensuremath{\frac{\partial^2}{\partial #1 \partial #2}}}


%%%%%%%%%%%%%
%%% Logic %%%
%%%%%%%%%%%%%
\DeclareMathOperator{\notimplies}{\centernot\implies}

%%%%%%%%%%%%%%%%%
%%% Fractions %%%
%%%%%%%%%%%%%%%%%
\newcommand{\ahalf}{\ensuremath{\nicefrac{1}{2}}\xspace}
\newcommand{\athird}{\ensuremath{\nicefrac{1}{3}}\xspace}
\newcommand{\aquarter}{\ensuremath{\nicefrac{1}{4}}\xspace}


%%%%%%%%%%%%%%%%%
%%% Shortcuts %%%
%%%%%%%%%%%%%%%%%
\newcommand{\eps}{\epsilon}
\newcommand{\veps}{\varepsilon}
\newcommand{\bmat}{\begin{pmatrix}}
\newcommand{\emat}{\end{pmatrix}}

% \newcommand{\angles}[1]{\langle #1 \rangle}
\DeclarePairedDelimiter\angles{\langle}{\rangle}
\newcommand{\ip}[2]{\angles{#1, #2}}

% Various other shortcuts =====================================================
% \newcommand{\indicator}{\mathbbm{1}} % characteristic (indicator) function
% ^Travis hates this, but it would be nice to have bbm instead.
% \providecommand{\abs}[1]{\left\lvert#1\right\rvert}

% left-right wrappers
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\parens}[1]{\left\lparen#1\right\rparen}
\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}
\newcommand{\braces}[1]{\left\lbrace#1\right\rbrace}
\newcommand{\brackets}[1]{\left\lbrack#1\right\rbrack}
% This is from: https://tex.stackexchange.com/questions/54385/spacing-between-triple-vertical-lines
\newcommand{\vertiii}[1]{{\left\vert\kern-0.25ex\left\vert\kern-0.25ex\left\vert #1 
    \right\vert\kern-0.25ex\right\vert\kern-0.25ex\right\vert}}

\newcommand{\theseta}[1]{\braces{#1}}
\newcommand{\thesetb}[2]{\left\lbrace#1\,\middle|\,#2\right\rbrace}
\newcommand{\thesetc}[2]{\lbrace #1 : #2\rbrace}
\newcommand{\thesetd}[3]{\left\{#1\right\}_{\ifthenelse{\isempty{#2}}{}{#2}}^{\ifthenelse{\isempty{#3}}{}{#3}}}
\newcommand{\Res}[1]{\underset{#1}{Res}}            % Residue

% For making block arrays with correct bracket sizes
\newcommand\topstrut[1][0.8ex]{\setlength\bigstrutjot{#1}{\bigstrut[t]}}
\newcommand\botstrut[1][0.6ex]{\setlength\bigstrutjot{#1}{\bigstrut[b]}}

% Common written abbreviations
% Source: https://tex.stackexchange.com/questions/15009/macros-for-common-abbreviations
\newcommand*{\eg}{e.g.\@\xspace}
\newcommand*{\ie}{i.e.\@\xspace}
\newcommand*{\sct}{s.t.\@\xspace}
\newcommand*{\WLOG}{WLOG\xspace}

% etc
\makeatletter
\newcommand*{\etc}{%
    \@ifnextchar{.}%
        {etc}%
        {etc.\@\xspace}%
}
\makeatother

% Logic and Complexity
\DeclareMathOperator{\Maj}{Maj}
\DeclareMathOperator{\Parity}{Parity}
\DeclareMathOperator{\XOR}{XOR}

% Asymptotic Notation
\newcommand{\bigoh}[1]{\mathcal{O}\left( #1 \right)}
\newcommand{\bigohp}[1]{\mathcal{O}_{P}\left( #1 \right)}
\newcommand{\bigohtd}[1]{\Tilde{\mathcal{O}}\left( #1 \right)}
\newcommand{\litoh}[1]{o\left( #1 \right)}
\newcommand{\bigom}[1]{\Omega\left( #1 \right)}
\newcommand{\litom}[1]{\omega\left( #1 \right)}
\newcommand{\bigth}[1]{\Theta\left( #1 \right)}
\newcommand{\bigthtd}[1]{\Tilde{\Theta}\left( #1 \right)}
\newcommand{\ordof}[2]{#1 \sim #2}
\newcommand{\ubrace}[3]{\underbrace{#1}_{#2}^{\ifthenelse{\isempty{#3}}{}{#3}}}

% Exponents and Logarithms
\newcommand{\expa}[1]{\exp{\left( #1 \right)}}
\newcommand{\expb}[1]{e^{#1}}
\newcommand{\expc}[2]{#1^{#2}}
\newcommand{\lna}[1]{\ln{\left( #1 \right)}}
\newcommand{\loga}[1]{\log{\left( #1 \right)}}
\newcommand{\logb}[2]{\log_{#1}{\left( #2 \right)}}

\newcommand{\theseqb}[3]{\left(#1\right)_{\ifthenelse{\isempty{#2}}{}{#2}}^{\ifthenelse{\isempty{#3}}{}{#3}}}

\newcommand{\Inda}[1]{\mathbb{I}{\left( #1 \right)}}
\newcommand{\Indb}[2]{\mathbb{I}_{#1}{\left( #2 \right)}}
\newcommand{\Indc}[1]{\mathbb{I}_{#1}}
\DeclareMathOperator{\Vol}{vol}
\newcommand{\vola}[1]{\Vol{\left( #1 \right)}}
\newcommand{\volb}[2]{\Vol_{#1}{\left( #2 \right)}}
\newcommand{\centroid}[1]{\operatorname{centroid}{\left( #1 \right)}}	% centroid
\newcommand{\chull}[1]{\operatorname{co}{\left( #1 \right)}}	% centroid
\newcommand{\qtext}[1]{\quad{\left(\text{#1}\right)}}	% quad separated text
\newcommand{\projn}[2]{\Pi_{ #1 }{\left( #2 \right)}}	% centroid
\newcommand{\powset}[1]{\mathcal{P}{\left( #1 \right)}}	% centroid
\newcommand{\stcomp}[1]{{#1}^{\mathsf{c}}}
\newcommand{\stcompa}[1]{{\left(#1\right)}^{\mathsf{c}}} 
\newcommand{\eqn}[1]{\begin{align*}#1\end{align*}}
\newcommand{\nit}{\noindent}
\newcommand{\twoelmcolvec}[2]{\begin{bmatrix}
                               #1 \\
                               #2
                             \end{bmatrix}}
